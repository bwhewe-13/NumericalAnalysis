#!/usr/bin/env bash
set -euo pipefail

repo_root="$(git rev-parse --show-toplevel)"

cd "$repo_root"

if command -v pre-commit >/dev/null 2>&1; then
	pre-commit run --all-files --hook-stage pre-push
	exit $?
fi

if python -m pre_commit --version >/dev/null 2>&1; then
	python -m pre_commit run --all-files --hook-stage pre-push
	exit $?
fi

echo "pre-commit is required for push checks. Install with: pip install pre-commit"
exit 1
